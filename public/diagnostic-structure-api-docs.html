<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Structure des Diagnostics - Documentation</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism.min.css">
</head>
<body>
    <div class="container mt-5">
        <div class="row">
            <div class="col-12">
                <h1 class="mb-4">API Structure des Diagnostics</h1>
                <p class="lead">Documentation pour l'API de récupération de la structure complète des diagnostics (modules, questions, réponses)</p>
                
                <div class="alert alert-success">
                    <strong>API Publique :</strong> Cette API ne nécessite pas d'authentification. Toutes les routes sont accessibles librement.
                </div>
            </div>
        </div>

        <!-- Structure Complète -->
        <div class="row mb-5">
            <div class="col-12">
                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h3>Structure Complète</h3>
                    </div>
                    <div class="card-body">
                        <h5>GET /api/v1/diagnostic-structure/complete</h5>
                        <p>Récupère la structure complète de tous les modules avec leurs questions et réponses possibles.</p>
                        
                        <h6>Exemple de requête :</h6>
                        <pre><code class="language-bash">curl -X GET "http://localhost:8000/api/v1/diagnostic-structure/complete" \
     -H "Content-Type: application/json"</code></pre>
                        
                        <h6>Exemple de réponse :</h6>
                        <pre><code class="language-json">{
    "success": true,
    "message": "Structure complète des diagnostics récupérée avec succès",
    "data": {
        "modules": [
            {
                "id": 1,
                "titre": "Tests psychotechniques",
                "description": "Module d'évaluation psychotechnique",
                "ordre": 1,
                "diagnosticmoduletype_id": 1,
                "questions": [
                    {
                        "id": 1,
                        "titre": "Comment gérez-vous le stress ?",
                        "description": "Évaluez votre capacité à gérer le stress",
                        "ordre": 1,
                        "diagnosticmodule_id": 1,
                        "diagnosticquestiontype_id": 1,
                        "score_max": 10,
                        "obligatoire": true,
                        "reponses_possibles": [
                            {
                                "id": 1,
                                "titre": "Très bien",
                                "description": "J'excellente gestion du stress",
                                "score": 10,
                                "ordre": 1,
                                "diagnosticquestion_id": 1
                            },
                            {
                                "id": 2,
                                "titre": "Bien",
                                "description": "Bonne gestion du stress",
                                "score": 7,
                                "ordre": 2,
                                "diagnosticquestion_id": 1
                            }
                        ]
                    }
                ]
            }
        ],
        "total_modules": 3,
        "total_questions": 25,
        "total_reponses": 75
    }
}</code></pre>
                    </div>
                </div>
            </div>
        </div>

        <!-- Structure par Module -->
        <div class="row mb-5">
            <div class="col-12">
                <div class="card">
                    <div class="card-header bg-success text-white">
                        <h3>Structure par Module</h3>
                    </div>
                    <div class="card-body">
                        <h5>GET /api/v1/diagnostic-structure/module/{moduleId}</h5>
                        <p>Récupère la structure détaillée d'un module spécifique.</p>
                        
                        <h6>Exemple de requête :</h6>
                        <pre><code class="language-bash">curl -X GET "http://localhost:8000/api/v1/diagnostic-structure/module/1" \
     -H "Content-Type: application/json"</code></pre>
                        
                        <h6>Exemple de réponse :</h6>
                        <pre><code class="language-json">{
    "success": true,
    "message": "Structure du module récupérée avec succès",
    "data": {
        "module": {
            "id": 1,
            "titre": "Tests psychotechniques",
            "description": "Module d'évaluation psychotechnique",
            "ordre": 1,
            "diagnosticmoduletype_id": 1,
            "questions": [...]
        },
        "total_questions": 8,
        "total_reponses": 24
    }
}</code></pre>
                    </div>
                </div>
            </div>
        </div>

        <!-- Liste des Modules -->
        <div class="row mb-5">
            <div class="col-12">
                <div class="card">
                    <div class="card-header bg-warning text-dark">
                        <h3>Liste des Modules</h3>
                    </div>
                    <div class="card-body">
                        <h5>GET /api/v1/diagnostic-structure/modules</h5>
                        <p>Récupère uniquement la liste des modules disponibles.</p>
                        
                        <h6>Exemple de requête :</h6>
                        <pre><code class="language-bash">curl -X GET "http://localhost:8000/api/v1/diagnostic-structure/modules" \
     -H "Content-Type: application/json"</code></pre>
                        
                        <h6>Exemple de réponse :</h6>
                        <pre><code class="language-json">{
    "success": true,
    "message": "Liste des modules récupérée avec succès",
    "data": {
        "modules": [
            {
                "id": 1,
                "titre": "Tests psychotechniques",
                "description": "Module d'évaluation psychotechnique",
                "ordre": 1,
                "diagnosticmoduletype_id": 1
            },
            {
                "id": 2,
                "titre": "Niveaux de structuration",
                "description": "Évaluation des niveaux de structuration",
                "ordre": 2,
                "diagnosticmoduletype_id": 2
            }
        ],
        "total": 3
    }
}</code></pre>
                    </div>
                </div>
            </div>
        </div>

        <!-- Questions par Module -->
        <div class="row mb-5">
            <div class="col-12">
                <div class="card">
                    <div class="card-header bg-info text-white">
                        <h3>Questions par Module</h3>
                    </div>
                    <div class="card-body">
                        <h5>GET /api/v1/diagnostic-structure/module/{moduleId}/questions</h5>
                        <p>Récupère les questions et réponses possibles d'un module spécifique.</p>
                        
                        <h6>Exemple de requête :</h6>
                        <pre><code class="language-bash">curl -X GET "http://localhost:8000/api/v1/diagnostic-structure/module/1/questions" \
     -H "Content-Type: application/json"</code></pre>
                        
                        <h6>Exemple de réponse :</h6>
                        <pre><code class="language-json">{
    "success": true,
    "message": "Questions du module récupérées avec succès",
    "data": {
        "questions": [
            {
                "id": 1,
                "titre": "Comment gérez-vous le stress ?",
                "description": "Évaluez votre capacité à gérer le stress",
                "ordre": 1,
                "diagnosticmodule_id": 1,
                "diagnosticquestiontype_id": 1,
                "score_max": 10,
                "obligatoire": true,
                "reponses_possibles": [...]
            }
        ],
        "total": 8
    }
}</code></pre>
                    </div>
                </div>
            </div>
        </div>

        <!-- Codes d'erreur -->
        <div class="row mb-5">
            <div class="col-12">
                <div class="card">
                    <div class="card-header bg-danger text-white">
                        <h3>Codes d'erreur</h3>
                    </div>
                    <div class="card-body">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Code</th>
                                    <th>Message</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>404</td>
                                    <td>Not Found</td>
                                    <td>Module ou ressource non trouvé</td>
                                </tr>
                                <tr>
                                    <td>500</td>
                                    <td>Internal Server Error</td>
                                    <td>Erreur serveur lors du traitement</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/plugins/autoloader/prism-autoloader.min.js"></script>
</body>
</html>
